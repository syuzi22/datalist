(this.webpackJsonpdatalist=this.webpackJsonpdatalist||[]).push([[0],{21:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var s=r(1),n=r(0),a=r.n(n),c=r(5),i=r.n(c),l=(r(21),r(12)),o=r(3),u=Object(o.b)((function(e,t){var r=t.id;return{email:e.users[r].email,tel:e.users[r].phone}}))((function(e){var t=e.email,r=e.tel;return Object(s.jsxs)("div",{className:"user_list__tooltip",children:[Object(s.jsxs)("span",{children:["Email: ",t]})," ",Object(s.jsxs)("span",{children:["Phone: ",r]})]})})),d=Object(o.b)((function(e){return{rowHeight:e.params.rowHeight}}))((function(e){var t=e.id,r=e.firstName,n=e.lastName,a=e.message,c=e.timestamp,i=e.rowHeight,l=new Date(c);return Object(s.jsxs)("tr",{className:"user_list__row",style:{height:i},children:[Object(s.jsxs)("td",{className:"user_list__cell user_list__cell__name",children:[r," ",n,Object(s.jsx)(u,{id:t})]}),Object(s.jsx)("td",{className:"user_list__cell user_list__cell__ellipsis user_list__cell__messsage",children:a}),Object(s.jsx)("td",{className:"user_list__cell user_list__cell__time",children:l.toLocaleDateString()})]})})),j=function(e){var t=e.handler;return Object(s.jsx)("button",{className:"user_list__controls_button",onClick:t,children:"Down"})},h=r(11),b=r.n(h),m=r(14),O="LOAD_USERS",f="START_FETCHING",_="LOAD_ERROR",p="SORT_ASC",x="SORT_DESC",v="asc",g="desc",w=Object(o.b)((function(e){return{dateSort:e.sort.date}}),(function(e){return{sortASC:function(){return e({type:p})},sortDESC:function(){return e({type:x})}}}))((function(e){var t=e.sortASC,r=e.sortDESC,n=e.dateSort;return Object(s.jsxs)("span",{className:"sort",children:["Sort by:"," ",Object(s.jsx)("b",{style:{cursor:"pointer"},className:"sort__arrow sort__arrow_".concat(n),onClick:function(){n===v||null===n?r():n!==g&&null!==n||t()},children:"Date"})]})})),N=Object(o.b)((function(e){return{rowHeight:e.params.rowHeight,visibleRows:e.params.visibleRows,dateSort:e.sort.date}}))((function(e){var t=e.users,r=e.rowHeight,n=e.visibleRows,c=e.dateSort,i=a.a.useRef(),o=a.a.useState(0),u=Object(l.a)(o,2),h=u[0],b=u[1],m=a.a.useState(""),O=Object(l.a)(m,2),f=O[0],_=O[1],p=function(e){var t=f.toLowerCase();return e.filter((function(e){return-1!==e.firstName.toLowerCase().indexOf(t)||-1!==e.lastName.toLowerCase().indexOf(t)}))};return a.a.useLayoutEffect((function(){var e=i.current;function s(e){b(Math.min(t.length-n-1,Math.floor(e.target.scrollTop/r)))}return e.addEventListener("scroll",s),function(){e.removeEventListener("scroll",s)}}),[t.length,n,r]),Object(s.jsxs)("div",{className:"user_list",children:[Object(s.jsxs)("div",{className:"user_list__controls",children:[Object(s.jsx)("input",{value:f,onChange:function(e){_(e.target.value)},placeholder:"Filter"}),Object(s.jsxs)("div",{className:"user_list__controls_r",children:[h<t.length-n-1?Object(s.jsx)(j,{handler:function(){i.current.scrollTop=i.current.scrollHeight}}):"",Object(s.jsx)(w,{})]})]}),Object(s.jsxs)("div",{style:{height:r*n+1,overflow:"auto"},ref:i,children:[Object(s.jsx)("div",{style:{height:r*h}}),Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:function(e){return c?(e.sort((function(e,t){return c===v?e.millis-t.millis:t.millis-e.millis})),e):e}(p(t)).slice(h,h+n+1).map((function(e){return Object(s.jsx)(d,{id:e.id,firstName:e.firstName,lastName:e.lastName,message:e.message,timestamp:e.timestamp},e.id)}))})}),Object(s.jsx)("div",{style:{height:function(){var e=p(t).length-(h+n+1);return r*Math.max(0,e)}()}})]})]})})),y=Object(o.b)((function(e){return{loaded:e.status.loaded,isFetching:e.status.isFetching,error:e.status.error,users:Object.values(e.users)}}),(function(e){return{loadUsers:function(){return e(function(){var e=Object(m.a)(b.a.mark((function e(t,r){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r().status.isFetching||t({type:f}),e.next=4,fetch("http://www.filltext.com/?rows=1000&id=%7Bnumber%7C1000%7D&firstName=%7BfirstName%7D&lastName=%7BlastName%7D&email=%7Bemail%7D&phone=%7Bphone%7C(xxx)xxx-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0432\u0438\u0434\u0435 \u0441\u043f\u0438\u0441\u043a\u0430. xx-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0432\u0438\u0434\u0435 \u0441\u043f\u0438\u0441\u043a\u0430. xx%7D&message=%7Blorem%7C32%7D&timestamp={date}&delay=3").then((function(e){return 200===e.status?e.json():null}));case 4:s=e.sent,t(s?{type:O,response:s}:{type:_});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.loaded,r=e.loadUsers,n=e.error,a=e.users,c=e.isFetching;return n?Object(s.jsx)("div",{children:"Information not found"}):(t||r(),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"React datalist"}),c?Object(s.jsx)("h2",{children:"Loading..."}):Object(s.jsx)(N,{users:a})]}))})),S=r(4),C=r(15),D=r(6),R=r(2),E=function(e){return e.reduce((function(e,t){return Object(R.a)(Object(R.a)({},e),{},Object(D.a)({},t.id,t))}),{})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var r=E(t.response.map((function(e){return Object(R.a)(Object(R.a)({},e),{},{millis:Date.parse(e.timestamp)})})));return Object(R.a)(Object(R.a)({},e),r);default:return e}},L={loaded:!1,isFetching:!1,error:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(R.a)(Object(R.a)({},e),{},{isFetching:!0});case O:return Object(R.a)(Object(R.a)({},e),{},{loaded:!0,isFetching:!1});case _:return Object(R.a)(Object(R.a)({},e),{},{error:!0});default:return e}},B={date:null},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(R.a)(Object(R.a)({},e),{},{date:v});case x:return Object(R.a)(Object(R.a)({},e),{},{date:g});default:return e}},A=Object(S.c)({params:function(){return{rowHeight:40,visibleRows:10}},status:H,users:F,sort:T}),k=Object(S.a)(C.a),I=Object(S.d)(A,k);i.a.render(Object(s.jsx)(o.a,{store:I,children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3da164df.chunk.js.map